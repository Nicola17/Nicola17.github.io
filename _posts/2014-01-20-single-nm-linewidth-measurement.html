---
layout: post
title: Single nm linewidth measurement
date: '2014-01-20T20:12:00.000+01:00'
author: Nicola Pezzotti
tags:
- Algorithms
- C++
- OpenCV
- GitHub
- Image Processing
modified_time: '2014-01-20T20:21:11.851+01:00'
thumbnail: http://4.bp.blogspot.com/--SdGYednU3I/Ut1z9W1OwqI/AAAAAAAABsQ/zymcZBSMM_M/s72-c/test0.tif
blogger_id: tag:blogger.com,1999:blog-7911490130261214164.post-7031530739060997182
blogger_orig_url: http://diaryofatinker.blogspot.com/2014/01/single-nm-linewidth-measurement.html
---

<div class="separator" style="clear: both; text-align: left;">My girlfriend Marijke Scotuzzi is a PhD candidate at the <a href="http://www.tnw.tudelft.nl/en/">Delft university of technology</a>.</div><br />Her main goal is to deposit small structures in the sub-10nm range.<br /><br />She deposited some lines next to each other and she needs to calculate the width of those lines: the figure below shows an example of those lines. You may noticethat it is affected by an heavy high frequency noise.<br />Furthermore the lines can hardly be distinguished from the back spots which lies on the surface around them.<br /><br />I've tried to help her out by writing a <a href="https://github.com/Nicola17/Single-nm-linewidth-measurement">C++ program</a> to enhance the original image.<br />Luckily I can make some assumpions on the input image: the lines are always vertical an they cross the top and the bottom limit edge of the image.<br /><br />I've developed the following algorithm:<br /><ol><li>Apply a median blur to the image (optional) \[Image[j][i] = medianBlur(Image[j][i])\]</li><li>Compute a per-column weight \[W[i] = \sum_{j=0}^J&nbsp;MedianImage[j][i]^2\]</li><li>Apply a bilateral filter on vector W (optional) \[W[i] = bilateralFilter(W[i])\]</li><li>Compute the enhanced image&nbsp;\[EnhancedImage[j][i] =&nbsp;Image[j][i]*\min((satO+W[i])*satM,255)&nbsp;\]</li></ol><div><br /></div><div>Here below some results are shown for a couple of images:</div><div><div class="separator" style="clear: both; text-align: center;"></div><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/--SdGYednU3I/Ut1z9W1OwqI/AAAAAAAABsQ/zymcZBSMM_M/s1600/test0.tif" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/--SdGYednU3I/Ut1z9W1OwqI/AAAAAAAABsQ/zymcZBSMM_M/s1600/test0.tif" height="314" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Input</td></tr></tbody></table><br /></div><div class="separator" style="clear: both; text-align: center;"></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-EeC9Qk6aAbo/Ut1zzi-J3xI/AAAAAAAABsI/gYhYYWWyxBQ/s1600/output2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-EeC9Qk6aAbo/Ut1zzi-J3xI/AAAAAAAABsI/gYhYYWWyxBQ/s1600/output2.png" height="314" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Output</td></tr></tbody></table><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-v_UsEFrgpP8/Ut10hYn6RMI/AAAAAAAABso/0G-1OG5QTr4/s1600/medianBlur.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-v_UsEFrgpP8/Ut10hYn6RMI/AAAAAAAABso/0G-1OG5QTr4/s1600/medianBlur.png" height="314" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Median blur</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-w3roR3Hl4T4/Ut10ggmtjiI/AAAAAAAABsk/psxNSRnaGCU/s1600/squaredColorWeights.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://1.bp.blogspot.com/-w3roR3Hl4T4/Ut10ggmtjiI/AAAAAAAABsk/psxNSRnaGCU/s1600/squaredColorWeights.png" height="314" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Weights</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-UTdtWlJj50Q/Ut10gjhdgwI/AAAAAAAABsg/6lIyuMkuABQ/s1600/bilateralWeights.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-UTdtWlJj50Q/Ut10gjhdgwI/AAAAAAAABsg/6lIyuMkuABQ/s1600/bilateralWeights.png" height="314" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Bilateral weights</td></tr></tbody></table><br /><div></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div><div class="separator" style="clear: both; text-align: center;"></div><br /><div class="separator" style="clear: both; text-align: center;"></div><br /></div><div><br /></div><div class="separator" style="clear: both; text-align: center;"></div><div><div class="separator" style="clear: both; text-align: center;"></div><br /></div>